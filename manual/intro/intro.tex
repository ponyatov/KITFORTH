\clearpage
\secly{Программирование для кофеварки ?!}\label{intro}

\noindent
Бадумтс-с-с! Вся семья сбежалась смотреть на чудо\ --- \textit{руководство
программиста}, выпавшее из коробки\note{пока доступно только в электронном виде
на сайте проекта:\\\url{https://github.com/ponyatov/KITFORTH/releases/latest/} в
виде \file{.pdf}\ файла} с вафельницей или минипечкой. К сожалению, не с
чайником или плитой: технологию IoT\note{интернет вещей, Internet-of-Things}\
поддерживают пока только два устройства, которые я кое-как смог запихать на
кухню:
\begin{itemize}
  \item 
Микропечь
\hremd{Kitfort KT-1709}{https://kitfort.ru/catalog/duhovki/17341/}
  \item 
Вафельница для бельгийских вафель
\hremd{Kitfort KT-1646}{https://kitfort.ru/catalog/vafelnitsa/20584/}
\end{itemize}

\noindent
Хотя вряд ли, скорее всего вы купили комплект ``микродуховка для программиста''
сами себе, потому что вас зацепила идея пощщупать технологию интернета вещей
вживую, пользуясь готовым устройством из коробки.

\clearpage
\secly{Мир свихнулся: Linux даже в тостере}

Технология IoT была для вас только хайпом, потому что до сих пор цена на
``умные'' бытовые устройства зашкаливала, чтобы взять их просто ``на
попробовать''. Другая проблема, куда более важная\ --- каждый производитель
пилит свой собственный набор протоколов, и полностью закрытое программное
обеспечение. Особенно весело с этим у китайской продукции с AliExpress, весело
продающейся и в ближайших магазинах под нескольми дешевыми типа брендами.
Вы покупаете устройство, например action камеру. В комплекте идет приложение под
Android\note{то есть все остальные виды компьютеров сразу в пролете}.
Допустим вы его ставите, дав разрешение на все возможные действия, включая
международные звонки и снятие отпечатков пальцев. Через два месяца приложение
обновляется на Play Store, и выясняется что теперь оно требует как минимум
Android 99, и не работает ни на одном из ваших телефонов.

\begin{framed}
\noindent
Закрытая прошивка имеет одно очень важное свойство\ --- вы можете использовать
устройство только так, как это заложил производитель. Все возможные проблемы и
ошибки в прошивке, приводящие к неправильному функционированию,
\emph{принципиально неизлечимы}. Даже если предусмотрена возможность ее
обновления, чаще всего производитель не исправляет некричные ошибки, забивает на
поддержку сразу после выхода следующей модели, и уж тем более не предоставляет
никакой технической поддержки пользователям, хотящим странного.
\end{framed}

\noindent
Для дорогих брендовых моделей ситуация чуть получше, выходит 1-2 обновления,
поддерка старых моделей прекращается немного позже, а опции и нестандартные
решения предоставляются по стоимости, сравнимой с новым устройством следующего
поколения.

\clearpage
\secly{OpenSource \& OpenHardware}

Идеология OpenSource предлагает совершенно другие возможности даже неопытному
пользователю, не говоря о тех кто в теме \term{embedded разработки}.

Производитель оборудования полностью снимает с себя ответственность по поддержке
продукта, предоставляя только ``железо'', и прошивку обеспечивающую вам только
базовые функции, доступные из коробки. Взамен производитель предоставляет полный
исходный код прошивки, и общую схему устройства, на которой указано куда и что
подключено.

В результате вы как конечный пользователь, от этого только выигрываете, так как
\emph{поддержку берет на себя сообщество пользователей}. Общаясь в сети на
открытых ресурсах\note{как минимум веб-форум производителя}, вы можете найти
способ реализовать любые ваши хотелки, даже если совершенно не разбираетесь в
программировании\ --- если идея интересна, найдутся достаточно опытные
пользователи, способные ее реализовать, и поделиться с вами результатом.

Правильно написанная документация, и помощь открытого сообщества поможет вам при
желании освоить программирование устройства на самом минимальном уровне, и при
этом делать достаточно сложные и нестандартные вещи. \emph{Даже просто повторяя
и комбинируя шаги, описанные в постах на веб-форуме, вы можете получить
возможности, недостижимые в традиционных даже самых дорогих моделях}. Для тех
же, кто уже имеет некоторые навыки, особенно в электронике, открываются
совершенно неограниченные возможности.

Если производитель закроет производство вашей модели, даже через несколько лет
вы сможете так же пользоваться вашей умной плитой, добавлять новые фишки и
нестандартные применения, до тех пор пока устройство в принципе способно
работать.

\clearpage
\secly{Почему именно бытовая техника для кухни?}

Готовка\ --- процесс достаточно сложный, но при этом он неплохо поддается
автоматизации. Возьмите любой рецепт, и вы сразу увидите в нем
последовательность действий\ --- \termdef{алгоритм}{алгоритм}. В очень многих
учебниках по программированию с первых страниц именно рецепты приводятся как
полный аналог выполнения \textit{вами} \termdef{программы}{программа}, то есть
последовательностей действий, иногда разных в зависимости от условий.

Взгляните на любую СВЧ-печь, или плиту, даже самую примитивную\ --- вы увидите
\termdef{устройства ввода}{устройство ввода}: ручки установки режима
(температуры, можности), и установки временных интервалов (таймер). На моделях
чуть подороже добавляются кнопки выбора \term{опций}\ --- экономичный режим,
кофе двойной плотности, стирка с отсрочкой. Почти любой бытовой прибор сообщает
вам свое состояние через \termdef{устройства вывода}{устройство вывода}: как
минимум есть лампочки включения/готовности, текущее время и дата, отсчет
таймера, температура на которую настроена духовка, и т.п. На дорогих моделях
стоят как минимум текстовые, и иногда и графические \term{дислпеи}.

\bigskip
Но все же не хватает чего-то важного. Каждый раз, на каждом следующем пункте
рецепта вам нужно вручную выставлять единственный таймер, не забыть сделать то,
порезать и положить сё, догнать внезапно убежавшее за молоком кофе, потушить
курицу\ldots водой потому что вам позвонили, и вы забыли ее выключить.

Никто не предлагает делать полную автоматизацию процесса с дозаторами, и
мешалками (разве что домашние пивовары, ау!), но множество вещей крайне полезно:
\begin{itemize}[nosep]
  \item точный контроль температуры, неплохо если с термопрофилями (изменение
  температуры по расписанию)
  \item отмеривание времени\ --- несколько независимых таймеров, до десятка,
  которые при необходимости могут запускать и останавливать друг друга
  \item оповещение пользователя о \term{событиях}, причем разных и разным
  звуком, а не единственный будильник для четырех включенных конфорок.
  \item весы, которые могут послать электрокастрюле сколько мяса вы в нее
  кладете, чтобы она пересчитала время и мощность нагрева.
\end{itemize}

\medskip\noindent
Другими словами, \emph{не хватает возможности полноценного} относительно
сложного \emph{программирования} с реакцией на внешние события, взаимодействия с
человеком, и устройств друг с другом.

Да, вы можете запрограммировать старальную машину\ --- включиться утром. Но нет
способа указать ей делать это только в выходные, \textbf{или} если нет дома
какого-то члена семьи (телефон не подключался к WiFi несколько часов),
\textbf{и} откладывать запуск каждого цикла стирки пока включена плита, чтобы не
перегружать проводку.

\clearpage
Первым кандидатом на переделку была выбрана самая дешевая и компактная
микропечь\ --- очень универсальное по функциям устройство, регулярно
востребованное потенциальной целевой аудиоторией для разогрева бутеров:
``паяльниками'' и программистами, которые могут стать костяком открытого
сообщества разработчиков.

\fig{img/KT_1907.png}{height=.65\textheight}

\noindent
\hremd{Kitfort KT-1709}{https://kitfort.ru/catalog/duhovki/17341/} самый дешевый
и компактный вариант из всего, что было доступно в магазинах, при этом имеет
идеальное сочетание размеров и дизайна, для установке на столе
среднестатистического кнопкодава. Также имеет значительную конструкционную
особенность\ --- блок автоматики расположен в подвале, регулятор расположен в
удачном месте для замены на джойстик или энкодер, а конструкция корпуса позвляет
организовать принудительный всос \emph{холодного} воздуха для охлаждения
электроники.

\bigskip\textit{
К сожалению по первому осмотру подвал не подвал, и в нем уместятся только пара
оптосимисторов, и крутилка\ --- блок электроники придется выносить в отдельном
блоке.}

